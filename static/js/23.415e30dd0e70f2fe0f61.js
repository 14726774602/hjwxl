webpackJsonp([23],{iXnE:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("59g0"),n=e("kkGL"),s={components:{m_loading:a.a,comment:n.a},data:function(){return{isRouterAlive:!0,name:"itPage",itContent:"",CorrelationIt:[],hideLoading:!0,nextCon:""}},props:{deta:{default:function(){return""}}},beforeCreate:function(){},created:function(){this.getIt(),this.getCorrelationIt()},mounted:function(){},methods:{getIt:function(){var t=this.$route.query.id,i=this;this.axios.get("http://api.hjwxl.com:3000/article/item",{params:{id:t}}).then(function(t){i.itContent=t.data[0],i.hideLoading=!1,i.setlast()}).catch(function(t){console.log(t)})},getCorrelationIt:function(){var t=this.$route.query.sm_class,i=this.$route.query.id,e=this;this.axios.get("http://api.hjwxl.com:3000/article/smlist",{params:{id:i,bg_class:2,sm_class:t}}).then(function(t){e.CorrelationIt=t.data}).catch(function(t){console.log(t)})},getLike:function(){var t="it_page"+this.$route.query.id,i=this.$cookie.get(t),e=this.$route.query.id,a=this;this.axios.get("http://api.hjwxl.com:3000/article/getLike",{params:{id:e}}).then(function(e){e.data.length>0?(0==i|!i?(e.data[0].alike+=1,a.setCookie(t,1,.5)):(e.data[0].alike-=1,a.setCookie(t,0,.5)),a.itContent.alike=e.data[0].alike,a.addLike()):alert("获取数据失败")}).catch(function(t){console.log(t)})},setCookie:function(t,i,e){var a=new Date;a.setTime(a.getTime()+24*e*60*60*1e3);var n="expires="+a.toUTCString();document.cookie=t+"="+i+"; "+n},addLike:function(){var t=this.$route.query.id,i=this.itContent.alike,e=this.qs.stringify({id:t,alike:i});this.axios({method:"post",url:"http://api.hjwxl.com:3000/article/addLike",data:e}).then(function(t){200==t.data.code&&console.log(t.data.msg)})},setlast:function(){var t=this.$route.query.id,i=this;this.axios.get("http://api.hjwxl.com:3000/article/last",{params:{bg_class:2}}).then(function(e){t==e.data[0].id?i.getFirst():i.getNext()}).catch(function(t){console.log(t)})},getNext:function(){var t=this.$route.query.id,i=this;this.axios.get("http://api.hjwxl.com:3000/article/nextArt",{params:{id:t,bg_class:2}}).then(function(t){i.nextCon=t.data[0]}).catch(function(t){console.log(t)})},getFirst:function(){var t=this;this.axios.get("http://api.hjwxl.com:3000/article/firstArt",{params:{bg_class:2}}).then(function(i){t.nextCon=i.data}).catch(function(t){console.log(t)})},reload:function(){var t=this;this.isRouterAlive=!1,this.$nextTick(function(){return t.isRouterAlive=!0})}},watch:{$route:function(){this.hideLoading=!0,this.reload(),this.getIt(),this.getCorrelationIt()}}},o={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t.hideLoading?e("m_loading"):t._e(),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"page-container"},[e("div",{staticClass:"left-nav animated fadeInLeft"},[e("p",[t._v("相关文章")]),t._v(" "),e("div",t._l(t.CorrelationIt,function(i,a){return i.id!=t.$route.query.id?e("router-link",{key:a,attrs:{to:"/it_page/it"+i.id+"?sm_class="+i.sm_class+"&id="+i.id}},[t._v(t._s(i.title))]):t._e()}),1)]),t._v(" "),e("div",{staticClass:"page-content animated fadeInRight"},[e("p",{staticClass:"page-title"},[t._v(t._s(t.itContent.title))]),t._v(" "),e("p",{staticClass:"page-time"},[t._v(t._s(t._f("dateFormat")(t.itContent.issueTime)))]),t._v(" "),e("p",{staticClass:"page-intro"},[t._v(t._s(t.itContent.intro))]),t._v(" "),e("router-view"),t._v(" "),e("router-link",{staticClass:"page-next",attrs:{to:"/it_page/it"+t.nextCon.id+"?sm_class="+t.nextCon.sm_class+"&id="+t.nextCon.id}},[e("p",[e("span",[t._v("下一篇")]),t._v(" "),e("span",[t._v(t._s(t.nextCon.title))])]),t._v(" "),e("svg",{staticClass:"qfy-pagination-link-icon",staticStyle:{stroke:"#4299e1",width:"16px",height:"50px"},attrs:{viewBox:"0 0 23 48"}},[e("g",{staticClass:"svg-icon"},[e("polyline",{attrs:{fill:"none","stroke-miterlimit":"10",points:"1.5,45.7 20.4,23.5 1.5,1.3"}})])])]),t._v(" "),e("p",{staticClass:"page-like"},[e("span",{on:{click:function(i){return t.getLike()}}},[t._v("❤（"+t._s(t.itContent.alike)+"）")])]),t._v(" "),e("div",{staticClass:"page-comment"},[t.isRouterAlive?e("comment"):t._e()],1)],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"page-img animated fadeInDown"},[i("img",{attrs:{src:"/static/img/it/5.png",alt:""}})])}]};var r=e("VU/8")(s,o,!1,function(t){e("tI/v")},"data-v-7524b34f",null);i.default=r.exports},"tI/v":function(t,i){}});
//# sourceMappingURL=23.415e30dd0e70f2fe0f61.js.map